<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Snow Store</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700;900&display=swap" rel="stylesheet">
  <style>
    /* اختصرت الستايل لسهولة النسخ — يمكنك استبدال بما تريد */
    body{margin:0;font-family:'Tajawal',sans-serif;background:linear-gradient(180deg,#001226,#00335b);color:#fff;overflow:hidden}
    header{position:fixed;top:0;left:0;right:0;padding:10px 12px;display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,0.6);z-index:10}
    .user{display:flex;align-items:center;gap:8px}
    .user img{width:40px;height:40px;border-radius:50%;border:2px solid #00bfff}
    .user-info{display:flex;flex-direction:column}
    .user-name{font-weight:700}
    .user-handle{color:#aee7ff;font-size:13px}
    .center-logo img{width:46px;height:46px;border-radius:8px}
    .balance{display:flex;align-items:center;gap:6px;background:rgba(0,200,255,0.08);padding:6px;border-radius:12px}
    main{padding:120px 16px 80px;text-align:center}
    footer{position:fixed;left:0;right:0;bottom:0;background:rgba(0,0,0,0.6);display:flex;justify-content:space-around;padding:10px 0}
    .flake{position:absolute;color:#fff;opacity:.85}
  </style>
</head>
<body>
  <header>
    <div class="balance">
      <button class="plus">+</button>
      <span id="balanceValue">0$</span>
    </div>

    <div class="center-logo">
      <img src="logo.png" id="storeLogo" alt="logo">
      <div>Snow Store</div>
    </div>

    <div class="user">
      <img id="userPhoto" src="logo.png" alt="user">
      <div class="user-info">
        <div id="userName" class="user-name">زائر</div>
        <div id="userHandle" class="user-handle">@Guest</div>
      </div>
    </div>
  </header>

  <main>
    <h1>❄️ أهلاً بك في Snow Store</h1>
    <p>افتح المتجر من داخل تيليجرام للحصول على اسمك وصورتك تلقائياً.</p>
  </main>

  <footer>
    <div onclick="show('home')">🏠<br>الرئيسية</div>
    <div onclick="show('products')">📦<br>المنتجات</div>
    <div onclick="show('orders')">🛍️<br>المشتريات</div>
    <div onclick="show('profile')">👤<br>الملف</div>
  </footer>

  <script>
    // قراءة بيانات WebApp داخل Telegram (أفضل طريقة)
    const tg = window.Telegram?.WebApp;
    if (tg && tg.initDataUnsafe && tg.initDataUnsafe.user) {
      const user = tg.initDataUnsafe.user;
      document.getElementById('userName').textContent = (user.first_name || "") + (user.last_name ? " " + user.last_name : "");
      document.getElementById('userHandle').textContent = user.username ? "@" + user.username : "";
      if (user.photo_url) document.getElementById('userPhoto').src = user.photo_url;
    } else {
      // احتياطي: إذا فتحناه عبر الرابط من البوت مع query params
      const q = new URLSearchParams(location.search);
      const name = q.get('name');
      const username = q.get('username');
      const photo = q.get('photo');
      if (name) document.getElementById('userName').textContent = name;
      if (username) document.getElementById('userHandle').textContent = username.startsWith('@') ? username : '@'+username;
      if (photo) document.getElementById('userPhoto').src = photo;
    }

    function show(id){ alert('تعمل لاحقاً — ستملأ الأقسام'); }
  </script>
</body>
</html>
